!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("preact"),require("mobx")):"function"==typeof define&&define.amd?define(["exports","preact","mobx"],t):t(e.mobxPreact={},e.preact,e.mobx)}(this,function(e,c,u){"use strict";function l(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.prefix,r=void 0===o?"":o,n=t.suffix,i=void 0===n?"":n;return r+(e.displayName||e.name||e.constructor&&e.constructor.name||"<component>")+i}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},p=function(){function r(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,o){return t&&r(e.prototype,t),o&&r(e,o),e}}(),f=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},d=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},h=!1,a=console;function y(e,t,o,r,n){var i,a,s,p=(i=e,a=u._getGlobalState().allowStateChanges,u._getGlobalState().allowStateChanges=i,a),c=void 0;try{c=t(o,r,n)}finally{s=p,u._getGlobalState().allowStateChanges=s}return c}function b(e,t){var o=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=e[t],n=m[t],i=r?!0===o?function(){n.apply(this,arguments),r.apply(this,arguments)}:function(){r.apply(this,arguments),n.apply(this,arguments)}:n;e[t]=i}function v(e,t){if(null==e||null==t||"object"!==(void 0===e?"undefined":i(e))||"object"!==(void 0===t?"undefined":i(t)))return e!==t;var o=Object.keys(e);if(o.length!==Object.keys(t).length)return!0;for(var r=void 0,n=o.length-1;r=o[n];n--)if(t[r]!==e[r])return!0;return!1}var m={componentWillMount:function(){var t=this;if(!0!==h){var e=l(this),r=!1,n=!1;p.call(this,"props"),p.call(this,"state");var i=this.render.bind(this),a=null,s=!1,o=function(e,t,o){s=!1;var r=void 0,n=void 0;if(a.track(function(){try{n=y(!1,i,e,t,o)}catch(e){r=e}}),r)throw r;return n};this.render=function(){return(a=new u.Reaction(e+".render()",function(){if(!s&&(s=!0,"function"==typeof t.componentWillReact&&t.componentWillReact(),!0!==t.__$mobxIsUnmounted)){var e=!0;try{n=!0,r||c.Component.prototype.forceUpdate.call(t),e=!1}finally{n=!1,e&&a.dispose()}}})).reactComponent=t,o.$mobx=a,(t.render=o)(t.props,t.state,t.context)}}function p(e){var t=this[e],o=u.createAtom("reactive "+e);Object.defineProperty(this,e,{configurable:!0,enumerable:!0,get:function(){return o.reportObserved(),t},set:function(e){!n&&v(t,e)?(t=e,r=!0,o.reportChanged(),r=!1):t=e}})}},componentWillUnmount:function(){!0!==h&&(this.render.$mobx&&this.render.$mobx.dispose(),this.__$mobxIsUnmounted=!0)},componentDidMount:function(){},componentDidUpdate:function(){},shouldComponentUpdate:function(e,t){return h&&a.warn("[mobx-preact] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side."),this.state!==t||v(this.props,e)}};function g(o){var e,t,r;if(1<arguments.length&&a.warn('Mobx observer: Using observer to inject stores is not supported. Use `@connect(["store1", "store2"]) ComponentClass instead or preferably, use `@inject("store1", "store2") @observer ComponentClass` or `inject("store1", "store2")(observer(componentClass))``'),!0===o.isMobxInjector&&a.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),!((r=o).prototype&&r.prototype.render||c.Component.isPrototypeOf(r)))return g((t=e=function(e){function t(){return s(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),p(t,[{key:"render",value:function(){return o.call(this,this.props,this.context)}}]),t}(c.Component),e.displayName=l(o),t));if(!o)throw new Error("Please pass a valid component to 'observer'");var n,i=o.prototype||o;return b(n=i,"componentWillMount",!0),b(n,"componentDidMount"),n.shouldComponentUpdate||(n.shouldComponentUpdate=m.shouldComponentUpdate),o.isMobXReactObserver=!0,o}var t=g(function(e){return e.children[0]()});t.displayName="Observer";"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var o,x=(function(e,t){var c,u,l,f,d,h,y,b;e.exports=(c={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},u={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},l=Object.defineProperty,f=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,y=Object.getPrototypeOf,b=y&&y(Object),function e(t,o,r){if("string"!=typeof o){if(b){var n=y(o);n&&n!==b&&e(t,n,r)}var i=f(o);d&&(i=i.concat(d(o)));for(var a=0;a<i.length;++a){var s=i[a];if(!(c[s]||u[s]||r&&r[s])){var p=h(o,s);try{l(t,s,p)}catch(e){}}}return t}return t})}(o={exports:{}},o.exports),o.exports),w={isMobxInjector:{value:!0,writable:!0,configurable:!0,enumerable:!0}};function n(n,i,e){var t,o,r=l(i,{prefix:"inject-",suffix:e?"-with-"+e:""}),a=(o=t=function(e){function t(){return s(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),p(t,[{key:"render",value:function(){var e={};for(var t in this.props)this.props.hasOwnProperty(t)&&(e[t]=this.props[t]);var o=n(this.context.mobxStores||{},e,this.context)||{};for(var r in o)e[r]=o[r];return c.h(i,e)}}]),t}(c.Component),t.displayName=r,o);return x(a,i),a.wrappedComponent=i,Object.defineProperties(a,w),a}function r(){var e,o=void 0;if("function"==typeof arguments[0])return o=arguments[0],function(e){var t=n(o,e);return t.isMobxInjector=!1,(t=g(t)).isMobxInjector=!0,t};for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e=t,o=function(t,o){return e.forEach(function(e){if(!(e in o)){if(!(e in t))throw new Error("MobX injector: Store '"+e+"' is not available! Make sure it is provided by some Provider");o[e]=t[e]}}),o},function(e){return n(o,e,t.join("-"))}}var j={children:!0,key:!0,ref:!0},O=console,P=function(e){function t(){return s(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),p(t,[{key:"render",value:function(e){var t=e.children;return 1<t.length?c.h("div",null," ",t," "):t[0]}},{key:"getChildContext",value:function(){var e={},t=this.context.mobxStores;if(t)for(var o in t)e[o]=t[o];for(var r in this.props)j[r]||"suppressChangedStoreWarning"===r||(e[r]=this.props[r]);return{mobxStores:e}}},{key:"componentWillReceiveProps",value:function(e){if(Object.keys(e).length!==Object.keys(this.props).length&&O.warn("MobX Provider: The set of provided stores has changed. Please avoid changing stores as the change might not propagate to all children"),!e.suppressChangedStoreWarning)for(var t in e)j[t]||this.props[t]===e[t]||O.warn("MobX Provider: Provided store '"+t+"' has changed. Please avoid replacing stores as the change might not propagate to all children")}}]),t}(c.Component);if(!c.Component)throw new Error("mobx-preact requires Preact to be available");e.observer=g,e.Observer=t,e.useStaticRendering=function(e){h=e},e.connect=function t(o,e){if("string"==typeof o)throw new Error("Store names should be provided as array");return Array.isArray(o)?e?r.apply(null,o)(t(e)):function(e){return t(o,e)}:g(o)},e.inject=r,e.Provider=P,Object.defineProperty(e,"__esModule",{value:!0})});
